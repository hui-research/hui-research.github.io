var jsPsychSerialReactionTimeMouse=function(t){"use strict";function e(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(i=a.key,n=void 0,"symbol"==typeof(n=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?n:String(n)),a)}var i,n}var r={name:"serial-reaction-time-mouse",parameters:{grid:{type:t.ParameterType.BOOL,pretty_name:"Grid",array:!0,default:[[1,1,1,1]]},target:{type:t.ParameterType.INT,pretty_name:"Target",array:!0,default:void 0},grid_square_size:{type:t.ParameterType.INT,pretty_name:"Grid square size",default:100},target_color:{type:t.ParameterType.STRING,pretty_name:"Target color",default:"#999"},response_ends_trial:{type:t.ParameterType.BOOL,pretty_name:"Response ends trial",default:!0},pre_target_duration:{type:t.ParameterType.INT,pretty_name:"Pre-target duration",default:0},trial_duration:{type:t.ParameterType.INT,pretty_name:"Trial duration",default:null},fade_duration:{type:t.ParameterType.INT,pretty_name:"Fade duration",default:null},allow_nontarget_responses:{type:t.ParameterType.BOOL,pretty_name:"Allow nontarget response",default:!1},prompt:{type:t.ParameterType.HTML_STRING,pretty_name:"Prompt",default:null}}},a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.jsPsych=e}var r,a,i;return r=t,a=[{key:"trial",value:function(t,e){var r=this,a=-1,i={rt:null,row:null,column:null},n=function(){var i;i=e.allow_nontarget_responses?t.querySelectorAll(".jspsych-serial-reaction-time-stimulus-cell"):[t.querySelector("#jspsych-serial-reaction-time-stimulus-cell-"+e.target[0]+"-"+e.target[1])];for(var n=0;n<i.length;n++)i[n].addEventListener("mousedown",(function(t){if(-1!=a){var e={};e.row=t.currentTarget.getAttribute("data-row"),e.column=t.currentTarget.getAttribute("data-column"),e.rt=Math.round(performance.now()-a),o(e)}}));a=performance.now(),null==e.fade_duration||(t.querySelector("#jspsych-serial-reaction-time-stimulus-cell-"+e.target[0]+"-"+e.target[1]).style.transition="background-color "+e.fade_duration),t.querySelector("#jspsych-serial-reaction-time-stimulus-cell-"+e.target[0]+"-"+e.target[1]).style.backgroundColor=e.target_color,null!==e.trial_duration&&r.jsPsych.pluginAPI.setTimeout(l,e.trial_duration)},s=this.stimulus(e.grid,e.grid_square_size);t.innerHTML=s,e.pre_target_duration<=0?n():this.jsPsych.pluginAPI.setTimeout(n,e.pre_target_duration),null!==e.prompt&&t.insertAdjacentHTML("beforeend",e.prompt);var l=function(){r.jsPsych.pluginAPI.clearAllTimeouts();var a={rt:i.rt,grid:e.grid,target:e.target,response:[parseInt(i.row,10),parseInt(i.column,10)],correct:i.row==e.target[0]&&i.column==e.target[1]};t.innerHTML="",r.jsPsych.finishTrial(a)};function o(t){i=null==i.rt?t:i,e.response_ends_trial&&l()}}},{key:"stimulus",value:function(t,e,r,a,i){for(var n="<div id='jspsych-serial-reaction-time-stimulus' style='margin:auto; display: table; table-layout: fixed; border-spacing:"+e/4+"px'>",s=0;s<t.length;s++){n+="<div class='jspsych-serial-reaction-time-stimulus-row' style='display:table-row;'>";for(var l=0;l<t[s].length;l++)n+="<div class='jspsych-serial-reaction-time-stimulus-cell' id='jspsych-serial-reaction-time-stimulus-cell-"+s+"-"+l+"' data-row="+s+" data-column="+l+" style='width:"+e+"px; height:"+e+"px; display:table-cell; vertical-align:middle; text-align: center; cursor: pointer; font-size:"+e/2+"px;",1==t[s][l]&&(n+="border: 2px solid black;"),void 0!==r&&r[0]==s&&r[1]==l&&(n+="background-color: "+a+";"),n+="'>",void 0!==i&&!1!==i[s][l]&&(n+=i[s][l]),n+="</div>";n+="</div>"}return n+="</div>",n}},{key:"simulate",value:function(t,e,r,a){"data-only"==e&&(a(),this.simulate_data_only(t,r)),"visual"==e&&this.simulate_visual(t,r,a)}},{key:"create_simulation_data",value:function(t,e){var r=this.jsPsych.utils.deepCopy(t.target);if(t.allow_nontarget_responses&&1!==this.jsPsych.randomization.sampleBernoulli(.8))for(;r[0]==t.target[0]&&r[1]==t.target[1];)r[0],this.jsPsych.randomization.randomInt(0,t.grid.length),r[1],this.jsPsych.randomization.randomInt(0,t.grid[r[0]].length);var a={grid:t.grid,target:t.target,response:r,rt:t.pre_target_duration+this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0),correct:r[0]==t.target[0]&&r[1]==t.target[1]},i=this.jsPsych.pluginAPI.mergeSimulationData(a,e);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(t,i),i}},{key:"simulate_data_only",value:function(t,e){var r=this.create_simulation_data(t,e);this.jsPsych.finishTrial(r)}},{key:"simulate_visual",value:function(t,e,r){var a=this.create_simulation_data(t,e),i=this.jsPsych.getDisplayElement();if(this.trial(i,t),r(),null!==a.rt){var n=i.querySelector('.jspsych-serial-reaction-time-stimulus-cell[data-row="'.concat(a.response[0],'"][data-column="').concat(a.response[1],'"]'));this.jsPsych.pluginAPI.clickTarget(n,a.rt)}}}],a&&e(r.prototype,a),i&&e(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}();return a.info=r,a}(jsPsychModule);
//# sourceMappingURL=https://unpkg.com/@jspsych/plugin-serial-reaction-time-mouse@1.1.3/dist/index.browser.min.js.map
